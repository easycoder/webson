{
    "#doc": "The parent container supplied from outside Webson",
    "#": {"#item": "$Container"},
    
    "$Container": {
        "#doc": "The inner container",
        "#element": "div",
        "#calc": [
            {"$NKeys": 10},
            {"$NRows": 4},
            {"$A": "$NKeys*2"},
            {"$B": "$A/20"},
            {"$C": "$NKeys+$B*2"},
            {"$ButtonSize": "#parent_width/$C"},
            {"$ButtonRadius": "$ButtonSize/5"},
            {"$Gap": "$ButtonSize/20"},
            {"$Height": "$ButtonSize+$Gap*2"}
        ],
        "padding": "<#parent_width/50>px",
        "background": "#444",
        "#": {"#item": "$Rows"}
    },
    
    "$Rows": {
        "#doc": "The row holder",
        "#element": "div",
        "@id": "rowHolder",
        "width": "100%",
        "height": "<$ButtonSize*$NRows+$Gap*$NRows*2+$Gap>px",
        "text-align": "center",
        "#": [
            {"#item": "$Row0"},
            {"#item": "$Row1"},
            {"#item": "$Row2"},
            {"#item": "$Row3"}
        ]
    },
    
    "$Row0": {
        "#doc": "Row 0 of the keyboard",
        "#element": "div",
        "@id": "row0",
        "width": "100%",
        "height": "<$Height>px",
        "$Row": 0,
        "$RowLabels": [
            "q", "w", "e", "r", "t", "y", "u", "i", "o", "p"
        ],
        "#": {"#item": "$Buttons"}
    },
    
    "$Row1": {
        "#doc": "Row 1 of the keyboard",
        "#element": "div",
        "@id": "row1",
        "width": "100%",
        "height": "<$Height>px",
        "$Row": 1,
        "$RowLabels": [
            "a", "s", "d", "f", "g", "h", "j", "k", "l"
        ],
        "#": {"#item": "$Buttons"}
    },
    
    "$Row2": {
        "#doc": "Row 2 of the keyboard",
        "#element": "div",
        "@id": "row2",
        "width": "100%",
        "height": "<$Height>px",
        "$Row": 2,
        "$RowLabels": [
            "z", "x", "c", "v", "b", "n", "m"
        ],
        "#": [
            {"#item": "$Shift"},
            {"#item": "$Buttons"},
            {"#item": "$Backspace"}
        ]
    },
    
    "$Row3": {
        "#doc": "Row 3 of the keyboard",
        "#element": "div",
        "@id": "row3",
        "width": "100%",
        "height": "<$Height>px",
        "$Row": 3,
        "#": [
            {"#item": "$?123"},
            {"#item": "$Comma"},
            {"#item": "$Space"},
            {"#item": "$Dot"},
            {"#item": "$OK"}
        ]
    },
    
    "$Buttons": {
        "#repeat": {
            "#doc": "This repeats a row of keys",
            "#target": "$StandardButton",
            "#steps": {
                "#arraysize": "$RowLabels"
            }
        }
    },
    
    "$Shift": {
        "#doc": "This is the Shift key",
        "$ID": "Shift",
        "$Width": "<$ButtonSize*1.6>",
        "$Content": "Shift",
        "$Href": "shift",
        "$FontSize": "<$ButtonSize*0.4>",
        "#": {
            "#item": "$Button"
        }
    },
    
    "$Backspace": {
        "#doc": "This is the Backspace key",
        "$ID": "Bksp",
        "$Width": "<$ButtonSize*1.6>",
        "$Content": "Bksp",
        "$Href": "bksp",
        "$FontSize": "<$ButtonSize*0.4>",
        "#": {
            "#item": "$Button"
        }
    },
    
    "$?123": {
        "#doc": "This is the ?123 key",
        "$ID": "123",
        "$Width": "<$ButtonSize*1.5>",
        "$Content": "?123",
        "$Href": "123",
        "$FontSize": "<$ButtonSize*0.4>",
        "#": {
            "#item": "$Button"
        }
    },
    
    "$Comma": {
        "#doc": "This is the Comma key",
        "$ID": ",",
        "$Width": "$ButtonSize",
        "$Content": ",",
        "$Href": ",",
        "$FontSize": "<$ButtonSize*0.5>",
        "#": {
            "#item": "$Button"
        }
    },
    
    "$Space": {
        "#doc": "This is the Space key",
        "$ID": "(sp)",
        "$Width": "<$ButtonSize*5>",
        "$Content": "&nbsp;",
        "$Href": "(sp)",
        "$FontSize": "<$ButtonSize*0.5>",
        "#": {
            "#item": "$Button"
        }
    },
    
    "$Dot": {
        "#doc": "This is the Dot key",
        "$ID": ".",
        "$Width": "$ButtonSize",
        "$Content": ".",
        "$Href": ".",
        "$FontSize": "<$ButtonSize*0.5>",
        "#": {
            "#item": "$Button"
        }
    },
    
    "$OK": {
        "#doc": "This is the OK key",
        "$ID": "OK",
        "$Width": "<$ButtonSize*1.5>",
        "$Content": "OK",
        "$Href": "OK",
        "$FontSize": "<$ButtonSize*0.4>",
        "#": {
            "#item": "$Button"
        }
    },
    
    "$StandardButton": {
        "#doc": "This is a standard key",
        "$ID": "r<$Row>-$Content",
        "$Width": "$ButtonSize",
        "$Content": {
            "#select": "$RowLabels",
            "#index": "#step"
        },
        "$FontSize": "<$ButtonSize*0.5>",
        "#": {
            "#item": "$Button"
        }
    },
    
    "$Button": {
        "#doc": "This is the outer container for a button",
        "#element": "div",
        "@id": "$ID",
        "position": "relative",
        "display": "inline-block",
        "width": "<$Width>px",
        "height": "<$ButtonSize>px",
        "margin": "<$Gap>px",
        "border-radius": "$ButtonRadius",
        "#": {
            "#item": "$ButtonInner"
        }
    },
    
    "$ButtonInner": {
        "#doc": "This is the button inner container",
        "#element": "div",
        "position": "relative",
        "width": "<$Width-$ButtonSize/10>",
        "height": "90%",
        "top": "10%",
        "border-radius": "<$ButtonRadius>px",
        "background": "#888",
        "#": {
            "#item": "$ButtonFace"
        }
    },
    
    "$ButtonFace": {
        "#doc": "This is the actual button face",
        "#element": "a",
        "@id": "id-$ID",
        "display": "block",
        "position": "absolute",
        "width": "100%",
        "top": "<$ButtonSize*0.7-$FontSize>px",
        "color": "white",
        "font-family": "mono",
        "font-size": "<$FontSize>px",
        "font-weight": "bold",
        "text-decoration": "none",
        "@href": "https://test.com?key=$Content",
        "#content": "$Content"
    }
}
